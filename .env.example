# Firebase Configuration
# Get these values from Firebase Console → Project Settings → Your apps
VITE_FIREBASE_API_KEY=your_api_key_here
# For production (Vercel): use your app domain so auth iframe is same-origin (fixes mobile/Safari).
# For local/dev: use your_project_id.firebaseapp.com
VITE_FIREBASE_AUTH_DOMAIN=www.trycope.com
VITE_FIREBASE_PROJECT_ID=your_project_id
VITE_FIREBASE_STORAGE_BUCKET=your_project_id.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
VITE_FIREBASE_APP_ID=your_app_id
VITE_FIREBASE_VAPID_KEY=your_web_push_vapid_public_key_here
# Web Push VAPID Private Key (server-side only, for sending Web Push notifications)
# Generate VAPID keys: npm install -g web-push && web-push generate-vapid-keys
# IMPORTANT: Public and private must be from the SAME keypair (e.g. web-push generate-vapid-keys)
FIREBASE_VAPID_PRIVATE_KEY=your_web_push_vapid_private_key_here

# Optional: Push diagnostic endpoint (dev: open; prod: set secret for /api/push/diag?secret=...)
# PUSH_DIAG_SECRET=your_random_secret_for_prod_diag

# Optional: Firebase Emulator (for local development)
VITE_USE_FIREBASE_EMULATOR=false

# Client API base for /api/* proxy calls. When unset, app uses relative URLs or current origin.
# Set to production URL (e.g. https://www.trycope.com) for production builds.
VITE_API_BASE_URL=https://www.trycope.com

# Jupiter API (server-side only – proxied via /api/jupiter so key is never exposed)
# Get your API key from https://portal.jup.ag. Set in Vercel. Client uses proxy; no VITE_ needed.
JUPITER_API_KEY=your_jupiter_api_key_here

# Jupiter Referral Program (for swap fees)
# Create referral account at https://referral.jup.ag
# After creating account, set your referral account public key here
# Also create referral token accounts for SOL, USDC (minimum)
VITE_JUPITER_REFERRAL_ACCOUNT=your_referral_account_pubkey_here
VITE_JUPITER_REFERRAL_FEE_BPS=100  # 100 basis points = 1% (you receive 0.8%, Jupiter takes 0.2%)

# Solana RPC (server-side – proxied via /api/rpc for balance/token-accounts; cron fallback)
# Priority: SOLANA_RPC_URL, HELIUS_API_KEY, then SOLANATRACKER_RPC_API_KEY. Prefer Helius or public RPC.
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
# HELIUS_API_KEY=your_helius_key  # Alternative RPC; used if SOLANA_RPC_URL unset
# SOLANATRACKER_RPC_API_KEY=...   # Deprecated fallback; app uses Birdeye for wallet/PnL

# Birdeye API (server-side only – api/birdeye proxy + Token Scanner)
# Get your API key from https://birdeye.so/. Set in Vercel. No VITE_ needed.
BIRDEYE_API_KEY=your_birdeye_api_key_here

# Anthropic API Key (server-side) - For Token Scanner AI analysis via Claude
# Get from https://console.anthropic.com/
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Helius API (optional – used as RPC when SOLANA_RPC_URL unset)
# Get your API key from https://www.helius.dev/ → Dashboard → API Keys
# HELIUS_API_KEY=your_helius_api_key_here

# CoinGecko API (for ETH/BNB native prices via relay)
# Get from https://www.coingecko.com/en/api (Demo or Pro)
COINGECKO_API_KEY=your_coingecko_api_key_here

# Moralis API (server-side only – /api/moralis/profitability + token-overview, search)
# Get from https://admin.moralis.io/. Set in Vercel. No VITE_ needed.
MORALIS_API_KEY=your_moralis_api_key_here

# =============================================================================
# Webhook Configuration (Vercel serverless only – set these in Vercel env vars)
# See internal documentation for step-by-step setup.
# =============================================================================

# From https://www.helius.dev/ → API Keys (webhooks + optional RPC fallback)
HELIUS_API_KEY=your_helius_api_key_here

# Leave empty at first. After first sync with a watched wallet, copy the returned
# webhookId from the API response and set it here (and in Vercel).
HELIUS_WEBHOOK_ID=

# Your live webhook endpoint. Use your production URL, e.g.:
# https://www.trycope.com/api/webhook/transaction
# Or your Vercel URL: https://your-app.vercel.app/api/webhook/transaction
WEBHOOK_URL=https://your-domain.vercel.app/api/webhook/transaction

# Jupiter referral fee claim (local script + Admin Push button)
# For Admin Push "Claim Jupiter fees" button: set these in Vercel env; use KEYPAIR_JSON (KEYPAIR_PATH not available serverless).
# For local script: node --env-file=.env.claim scripts/claim-jupiter-referral-fees.mjs or pnpm run claim-jupiter-fees
JUPITER_REFERRAL_ACCOUNT=your_referral_account_pubkey_here
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
KEYPAIR_PATH=~/.config/solana/id.json
# Or KEYPAIR_JSON=[1,2,...] (JSON array of secret key bytes; required for /api/jupiter/claim-fees)


# Optional: protect /api/webhook/sync. Generate: openssl rand -base64 32
# Set the same value in VITE_WEBHOOK_SYNC_SECRET so the client can call sync.
WEBHOOK_SYNC_SECRET=
VITE_WEBHOOK_SYNC_SECRET=

# Vercel Cron auth - set in Vercel Dashboard → Project → Settings → Environment Variables.
# Vercel automatically sends this when invoking /api/cron/*. Also used for manual sync (admin uses Firebase token instead).
# Generate: openssl rand -base64 32
CRON_SECRET=your_cron_secret_here

# Optional: Helius echoes this in Authorization when POSTing to your URL.
# Generate: openssl rand -base64 32. Set in Vercel; sync sends it as authHeader.
HELIUS_WEBHOOK_SECRET=

# Firebase Admin SDK (for serverless / Vercel)
# Option A: Single JSON (from Firebase Console → Project Settings → Service Accounts)
FIREBASE_SERVICE_ACCOUNT={"project_id":"...","client_email":"...","private_key":"..."}
# Option B: Separate vars (set in Vercel if you prefer not to use one big JSON)
# FIREBASE_ADMIN_PROJECT_ID=your_project_id
# FIREBASE_ADMIN_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your_project_id.iam.gserviceaccount.com
# FIREBASE_ADMIN_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# Encryption Secret
# IMPORTANT: Change this to a strong random secret in production!
# This is used to encrypt wallet credentials before storing in Firebase
# Generate a secure random string (e.g., using: openssl rand -base64 32)
VITE_ENCRYPTION_SECRET=your-strong-random-secret-here-change-in-production

# Server-side Encryption Secret (for serverless functions)
# Should match VITE_ENCRYPTION_SECRET value (without VITE_ prefix for server-side)
ENCRYPTION_SECRET=your-strong-random-secret-here-change-in-production

# Relay API (server-side only – deposit/withdraw/swap quotes and execution)
# Get your API key from https://docs.relay.link/
RELAY_API_KEY=your_relay_api_key_here
# Optional: override for testnet
# RELAY_API_BASE=https://api.testnets.relay.link
# Optional: EVM address that receives 1% app fees on every Relay quote. If unset, uses default. Claim at https://relay.link/claim-app-fees
# RELAY_APP_FEE_RECIPIENT=0x90554A05862879c77e64d154e0A4Eb92e48eC384

# EVM deposit webhook: when custodial Base/BNB wallet receives USDC, auto-bridge to Solana
# See internal documentation for full setup.
# Secret your backend expects when a custom caller sends x-webhook-secret or Authorization Bearer (optional if using Alchemy only)
WEBHOOK_EVM_DEPOSIT_SECRET=
# Alchemy: optional signing key from webhook detail page to verify X-Alchemy-Signature (HMAC). If unset, requests with X-Alchemy-Signature are still allowed (Option B) so Alchemy webhooks work.
# ALCHEMY_EVM_DEPOSIT_SIGNING_KEY=
# Alchemy: for creating/updating Address Activity webhook and adding new custodial addresses via API
# Get from https://dashboard.alchemy.com/ → your app → API Key
ALCHEMY_API_KEY=
# Required for PATCH update-webhook-addresses (sync script + relay). Get from Dashboard → Data → Webhooks → AUTH TOKEN (not the app API Key). If unset, ALCHEMY_API_KEY is used.
# ALCHEMY_NOTIFY_AUTH_TOKEN=
# Set after creating the Address Activity webhooks (one per chain). Needed to add new users' addresses via API.
# Alchemy allows only one chain per webhook, so create one webhook for Base and one for BSC.
ALCHEMY_EVM_DEPOSIT_WEBHOOK_ID_BASE=
ALCHEMY_EVM_DEPOSIT_WEBHOOK_ID_BNB=

# SOL funder: sends 0.005 SOL to new wallets and tops up low-balance wallets (for tx fees)
# Base58-encoded Solana private key. Used by POST /api/relay/fund-new-wallet and scripts (fund-existing-wallets-sol, sol-funder-loop)
FUNDER_PRIVATE_KEY=

# Optional: base URL for server-to-self relay calls (defaults to https://${VERCEL_URL} on Vercel)
# API_BASE_URL=https://your-domain.vercel.app
# Optional: EVM RPC URLs used by relay for bridge execution (defaults to public Base/BNB RPCs)
# Prefer Alchemy/QuickNode URLs for rate limits and reliability
# BASE_RPC_URL=https://base-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
# BNB_RPC_URL=https://bnb-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
